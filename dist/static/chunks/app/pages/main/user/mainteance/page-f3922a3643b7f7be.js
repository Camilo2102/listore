(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{8200:function(e,t,i){Promise.resolve().then(i.bind(i,14595))},45174:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i(9268);function r(e){let{title:t,children:i}=e;return(0,n.jsxs)("div",{className:"md:p-6 lg:p-7 p-5 grid justify-content-center",style:{border:"1px solid",borderRadius:"30px",borderColor:"rgba(0,0,0,0.5)"},children:[(0,n.jsx)("div",{className:"col-12 text-center",children:(0,n.jsx)("h2",{className:"text-5xl font-bold",style:{marginTop:"10px",marginBottom:"10px"},children:t})}),(0,n.jsx)("div",{className:"col-12",children:i})]})}},59808:function(e,t,i){"use strict";i.d(t,{A:function(){return n}});class n{}n.INVENTORY="inventory",n.PRODUCT="product",n.USER="user",n.SUPPLIER="supplier",n.SPENT="spent",n.ATTRIBUTES="atributes",n.SALE="sale",n.BUY="buy",n.PATTERN="pattern",n.KINDOFPRODUCT="kindOfProduct",n.CHARACTERISTIC="characteristic"},46003:function(e,t,i){"use strict";i.d(t,{C:function(){return r},W:function(){return s}});class n{}n.CHALLENGER_DESC="Challenger",n.MASTER_DESC="Master",n.DIAMOND_DESC="Diamond",n.PLATINUM_DESC="Platinum",n.GOLD_DESC="Gold",n.CHALLENGER_VAL="C",n.MASTER_VAL="M",n.DIAMOND_VAL="D",n.PLATINUM_VAL="P",n.GOLD_VAL="G";let r={[n.CHALLENGER_VAL]:n.CHALLENGER_DESC,[n.MASTER_VAL]:n.MASTER_DESC,[n.DIAMOND_VAL]:n.DIAMOND_DESC,[n.PLATINUM_VAL]:n.PLATINUM_DESC,[n.GOLD_VAL]:n.GOLD_DESC},s=[{code:n.DIAMOND_DESC,value:n.DIAMOND_VAL,description:n.DIAMOND_DESC},{code:n.PLATINUM_DESC,value:n.PLATINUM_VAL,description:n.PLATINUM_DESC},{code:n.GOLD_DESC,value:n.GOLD_VAL,description:n.GOLD_DESC}]},34849:function(e,t,i){"use strict";i.d(t,{P:function(){return l},r:function(){return a}});var n=i(9268),r=i(86006);let s=(0,r.createContext)({});function a(){return(0,r.useContext)(s)}function l(e){let{children:t}=e,[i,a]=(0,r.useState)(!1);return(0,n.jsx)(s.Provider,{value:{isLoading:i,startLoading:()=>a(!0),stopLoading:()=>a(!1)},children:t})}},24139:function(e,t,i){"use strict";i.d(t,{KQ:function(){return d},QR:function(){return o}});var n=i(9268),r=i(56008),s=i(86006),a=i(34849);let l=(0,s.createContext)({});function o(){return(0,s.useContext)(l)}let d=e=>{let{children:t}=e,i=(0,r.useRouter)(),o=(0,r.usePathname)(),d=(0,r.useSearchParams)(),{startLoading:c,stopLoading:u}=(0,a.r)(),[v,S]=(0,s.useState)(""),E=e=>(""!==v&&(e+="?version=".concat(v)),e),f=()=>{let e=d.get("version");S(""),e&&S(e)};return(0,s.useEffect)(()=>{f(),u()},[o,d]),(0,n.jsx)(l.Provider,{value:{goToRoute:e=>{c();let t=E(e);if(o===t)return u();i.push(t)},version:v},children:t})}},82348:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i(92449);function r(){let e="auth",{httpGet:t,httpPost:i,httpDelete:r}=(0,n.Z)();return{login:t=>i(e+"/login",!1,t),register:t=>i(e+"/register",!1,t),registerUser:t=>i(e+"/registerUser",!0,t),validateCredential:i=>t(e+"/validateCredential?credential=".concat(i),!1),disableUser:t=>r(e+"/disableUser?id=".concat(t),!0),enableUser:t=>i(e+"/enableUser",!1,t),sendRecoveryEmail:i=>t(e+"/recoverPassword?mail="+i,!1),validateToken:()=>t(e+"/validateToken",!0)}}},14595:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return L}});var n=i(9268),r=i(86006),s=i(35105),a=i(45174),l=i(39451),o=i(85188),d=i(52899),c=i(78980),u=i(46003),v=i(67121),S=i(82348),E=i(87823),f=i(59808),A=i(24139),p=i(97340),C=i(61804),D=i(91148);function m(e){let{userSelected:t}=e,{registerUser:i}=(0,S.Z)(),{update:s}=(0,E.Z)(f.A.USER),{goToRoute:m}=(0,A.QR)(),{getCredentials:_}=(0,p.Z)(),{isValidRes:N}=(0,C.Z)(),{showSuccess:L,showError:h}=(0,D.V)(),{requiered:g,maxLenght:x,minLenght:R}=(0,c.Z)(),[T,P]=(0,r.useState)(!1),[U,M]=(0,r.useState)({name:"",role:"",active:"N",credential:{id:"",mail:"",password:null,userName:""},company:{id:""}}),[O,I]=(0,r.useState)([{field:"name",value:"",description:"Nombre",colSize:12,type:d.h.INPUT,validators:[g,x(36),R(3)],invalid:!1,message:!0,icon:"pi-user",disabled:void 0!==t},{field:"userName",value:"",description:"Usuario",colSize:12,type:d.h.INPUT,validators:[g,x(12),R(3)],invalid:!1,message:!0,icon:"pi-user",disabled:void 0!==t},{field:"mail",value:"",description:"Correo",icon:"pi-envelope",type:d.h.INPUT,colSize:12,validators:[g,x(36),R(3)],invalid:!1,message:!0,disabled:void 0!==t},{field:"role",value:"",type:d.h.DROPDOWN,colSize:12,description:"Rol",validators:[g],invalid:!1,message:!0,options:u.W}]),[b,V,G,j]=(0,o.p)(O),y=()=>{i(U).then(e=>{N(e)&&(L(v.V.MESSAGE_SUCCESS,v.V.MESSAGE_CREATE_SUCCESS),m("/pages/main/user"))})},Z=()=>{s(!0,U).then(e=>{N(e)&&(L(v.V.MESSAGE_SUCCESS,v.V.MESSAGE_UPDATE_SUCCESS),m("/pages/main/user"))})};return(0,r.useEffect)(()=>{if(!T&&t){M(t),G(t);return}T&&(void 0===t?y():Z())},[T]),(0,n.jsx)("div",{className:"lg:p-6 md:p-10 p-4",children:(0,n.jsx)(a.Z,{title:"Registro de trabajador",children:(0,n.jsx)(l.Z,{buttonLabel:void 0===t?"Guardar":"Actualizar",update:void 0===t,form:V,value:b,setValue:G,submit:e=>{e.preventDefault();let[i,n]=j();if(I([...i]),n){var r,s,a,l;let e=null===(r=O.find(e=>"password"===e.field))||void 0===r?void 0:r.value,i=null===(s=O.find(e=>"passwordCheck"===e.field))||void 0===s?void 0:s.value;if(e===i){let{name:e,userName:i,mail:n,role:r}=b;M({id:U.id?U.id:void 0,name:e,role:r,active:t?"S":"N",credential:{id:(null===(a=U.credential)||void 0===a?void 0:a.id)?null===(l=U.credential)||void 0===l?void 0:l.id:void 0,mail:n,userName:i,password:null},company:{id:_().company}}),P(!0);return}h(v.V.MESSAGE_ERROR,v.V.MESSAGE_PASSWORD_MISMATCH)}}})})})}var _=i(76394),N=i.n(_);function L(){let{user:e,setUser:t}=(0,r.useContext)(s.x);return(0,n.jsxs)("div",{className:"flex justify-content-center align-items-center",style:{minHeight:"100vh",overflowY:"auto"},children:[(0,n.jsx)("div",{className:"lg:col-6 md:col-6 col-12 lg:p-8",children:(0,n.jsx)(m,{userSelected:e})}),(0,n.jsx)("div",{className:"lg:col-6 md:col-6 hidden md:flex justify-content-center align-items-center",children:(0,n.jsx)(N(),{src:"/registerEmployee.svg",alt:"Login",style:{maxWidth:"750px",width:"80%"}})})]})}},35105:function(e,t,i){"use strict";i.d(t,{x:function(){return r}});var n=i(86006);let r=(0,n.createContext)({})}},function(e){e.O(0,[87,546,123,313,856,780,977,831,253,769,744],function(){return e(e.s=8200)}),_N_E=e.O()}]);